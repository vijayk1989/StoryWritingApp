import{w as p}from"./index.Cmx0dTen.js";import{f as C,p as h,a as y,n as d,h as S,s as L}from"./Editor.CJH2FCh-.js";import"./jsx-runtime.B-tYHWOS.js";import"./index.BCPtUIm2.js";import"./supabase.YDNJ6__1.js";import"./floating-ui.react-dom.BmbJoTtk.js";import"./index.D1eIsul2.js";import"./button.DSwAMVRZ.js";import"./index.BuzRTTe3.js";import"./iconBase.wJcibKWI.js";import"./useLorebookStore.GsEaYorD.js";import"./index.Bk4Tk5ow.js";import"./react.BoqmBW-A.js";import"./useChapterStore.BIfqi0n6.js";import"./index.BInd9SeV.js";const g=/[#.]/g;function T(e,t){const r=e||"",n={};let o=0,s,i;for(;o<r.length;){g.lastIndex=o;const a=g.exec(r),c=r.slice(o,a?a.index:r.length);c&&(s?s==="#"?n.id=c:Array.isArray(n.className)?n.className.push(c):n.className=[c]:i=c,o+=c.length),a&&(s=a[0],o++)}return{type:"element",tagName:i||t||"div",properties:n,children:[]}}const j=new Set(["menu","submit","reset","button"]),m={}.hasOwnProperty;function w(e,t,r){const n=r&&D(r);return function(s,i,...a){let c=-1,f;if(s==null)f={type:"root",children:[]},a.unshift(i);else if(f=T(s,t),f.tagName=f.tagName.toLowerCase(),n&&m.call(n,f.tagName)&&(f.tagName=n[f.tagName]),M(i,f.tagName)){let l;for(l in i)m.call(i,l)&&G(e,f.properties,l,i[l])}else a.unshift(i);for(;++c<a.length;)u(f.children,a[c]);return f.type==="element"&&f.tagName==="template"&&(f.content={type:"root",children:f.children},f.children=[]),f}}function M(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?j.has(e.type.toLowerCase()):!("value"in e)}function G(e,t,r,n){const o=C(e,r);let s=-1,i;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;i=n}else typeof n=="boolean"?i=n:typeof n=="string"?o.spaceSeparated?i=h(n):o.commaSeparated?i=y(n):o.commaOrSpaceSeparated?i=h(y(n).join(" ")):i=N(o,o.property,n):Array.isArray(n)?i=n.concat():i=o.property==="style"?P(n):String(n);if(Array.isArray(i)){const a=[];for(;++s<i.length;)a[s]=N(o,o.property,i[s]);i=a}o.property==="className"&&Array.isArray(t.className)&&(i=t.className.concat(i)),t[o.property]=i}}function u(e,t){let r=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++r<t.length;)u(e,t[r]);else if(typeof t=="object"&&"type"in t)t.type==="root"?u(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function N(e,t,r){if(typeof r=="string"){if(e.number&&r&&!Number.isNaN(Number(r)))return Number(r);if((e.boolean||e.overloadedBoolean)&&(r===""||d(r)===d(t)))return!0}return r}function P(e){const t=[];let r;for(r in e)m.call(e,r)&&t.push([r,e[r]].join(": "));return t.join("; ")}function D(e){const t={};let r=-1;for(;++r<e.length;)t[e[r].toLowerCase()]=e[r];return t}const F=w(S,"div"),B=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],I=w(L,"g",B);function te(e,t){return(e?A(e,t||{}):void 0)||{type:"root",children:[]}}function A(e,t){const r=O(e,t);return r&&t.afterTransform&&t.afterTransform(e,r),r}function O(e,t){switch(e.nodeType){case 1:return V(e,t);case 3:return k(e);case 8:return E(e);case 9:return b(e,t);case 10:return R();case 11:return b(e,t);default:return}}function b(e,t){return{type:"root",children:x(e,t)}}function R(){return{type:"doctype"}}function k(e){return{type:"text",value:e.nodeValue||""}}function E(e){return{type:"comment",value:e.nodeValue||""}}function V(e,t){const r=e.namespaceURI,n=r===p.svg?I:F,o=r===p.html?e.tagName.toLowerCase():e.tagName,s=r===p.html&&o==="template"?e.content:e,i=e.getAttributeNames(),a={};let c=-1;for(;++c<i.length;)a[i[c]]=e.getAttribute(i[c])||"";return n(o,a,x(s,t))}function x(e,t){const r=e.childNodes,n=[];let o=-1;for(;++o<r.length;){const s=A(r[o],t);s!==void 0&&n.push(s)}return n}export{te as fromDom};
