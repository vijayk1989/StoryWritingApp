import{j as e}from"./jsx-runtime.B-tYHWOS.js";import{R as n}from"./index.BuzRTTe3.js";import{u as d}from"./useStoryStore.DcIucTCh.js";import{u as m}from"./index.Bk4Tk5ow.js";import{_ as a}from"./index.BInd9SeV.js";import"./index.BCPtUIm2.js";import"./iconBase.wJcibKWI.js";import"./react.BoqmBW-A.js";const h=r=>fetch(r).then(s=>s.json());function N(){const{data:r,error:s,isLoading:o}=m("/api/stories",h,{revalidateOnFocus:!1,dedupingInterval:5e3,keepPreviousData:!0}),{deleteStory:i}=d(),l=async t=>{try{await i(t),a.success("Story deleted successfully!")}catch(c){a.error("Failed to delete story"),console.error("Error deleting story:",c)}};return s?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-red-500",children:"Error loading stories"})}):o?e.jsx("div",{className:"text-center py-12",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e.jsx("div",{className:"grid gap-6",children:r?.length?r.map(t=>e.jsxs("div",{className:"relative group",children:[e.jsxs("a",{href:`/story/${t.id}`,className:"block p-6 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold",children:t.title}),e.jsxs("p",{className:"text-gray-400 text-sm mt-4",children:["Created ",new Date(t.created_at).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>l(t.id),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-100",title:"Delete story",children:e.jsx(n,{className:"w-5 h-5"})})]},t.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"You haven't created any stories yet."}),e.jsx("p",{className:"text-gray-500",children:"Enter a title above to create your first story!"})]})})}export{N as default};
