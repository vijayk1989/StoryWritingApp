import{j as e}from"./jsx-runtime.B-tYHWOS.js";import{r as i}from"./index.BCPtUIm2.js";import{u as v}from"./useLorebookStore.GsEaYorD.js";import{c as n,B as p}from"./button.DSwAMVRZ.js";import{L as d,I as h,S as g,a as x,b as u,c as f,d as j,T as w}from"./select.DN5dgNIo.js";import"./supabase.YDNJ6__1.js";import"./index.Bk4Tk5ow.js";import"./react.BoqmBW-A.js";import"./index.CkCWt44i.js";import"./index.D1eIsul2.js";import"./floating-ui.react-dom.BmbJoTtk.js";const b=i.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:n("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t}));b.displayName="Card";const S=i.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:n("flex flex-col space-y-1.5 p-6",r),...t}));S.displayName="CardHeader";const k=i.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:n("text-2xl font-semibold leading-none tracking-tight",r),...t}));k.displayName="CardTitle";const F=i.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:n("text-sm text-muted-foreground",r),...t}));F.displayName="CardDescription";const C=i.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:n("p-6 pt-0",r),...t}));C.displayName="CardContent";const I=i.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:n("flex items-center p-6 pt-0",r),...t}));I.displayName="CardFooter";const L=["Character","Item","Location"],T=["Background","Artifact","Spell","Protagonist","Antagonist","Plot","Other"];function Y({lorebookId:r}){const{createLorebookItem:t,isCreating:s}=v(),[N,m]=i.useState(!1),[l,c]=i.useState({name:"",tags:"",classification:"Character",lore_type:"Background",description:""}),y=async a=>{a.preventDefault();try{await t({...l,lorebook_id:r}),c({name:"",tags:"",classification:"Character",lore_type:"Background",description:""}),m(!1)}catch(o){console.error("Failed to create lorebook item:",o)}};return N?e.jsx(b,{className:"bg-white",children:e.jsx(C,{className:"pt-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Name"}),e.jsx(h,{id:"name",value:l.name,onChange:a=>c(o=>({...o,name:a.target.value})),className:"bg-white border-gray-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(h,{id:"tags",value:l.tags,onChange:a=>c(o=>({...o,tags:a.target.value})),placeholder:"tag1, tag2, tag3",className:"bg-white border-gray-300"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"classification",children:"Classification"}),e.jsxs(g,{value:l.classification,onValueChange:a=>c(o=>({...o,classification:a})),children:[e.jsx(x,{className:"bg-white border-gray-300",children:e.jsx(u,{placeholder:"Select classification"})}),e.jsx(f,{className:"bg-white",children:L.map(a=>e.jsx(j,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"lore_type",children:"Lore Type"}),e.jsxs(g,{value:l.lore_type,onValueChange:a=>c(o=>({...o,lore_type:a})),children:[e.jsx(x,{className:"bg-white border-gray-300",children:e.jsx(u,{placeholder:"Select lore type"})}),e.jsx(f,{className:"bg-white",children:T.map(a=>e.jsx(j,{value:a,children:a},a))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",children:"Description"}),e.jsx(w,{id:"description",value:l.description,onChange:a=>c(o=>({...o,description:a.target.value})),rows:4,className:"min-h-[100px] bg-white border-gray-300",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(p,{type:"button",variant:"ghost",onClick:()=>m(!1),children:"Cancel"}),e.jsx(p,{type:"submit",disabled:s,children:s?"Creating...":"Create"})]})]})})}):e.jsx(p,{onClick:()=>m(!0),variant:"outline",className:"w-full p-6 border-2 border-dashed bg-white hover:bg-white",children:"+ Add Lorebook Item"})}export{Y as default};
